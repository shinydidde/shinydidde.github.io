(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[698],{2966:(e,t,r)=>{"use strict";r.d(t,{StarfieldProvider:()=>l,w:()=>s});var n=r(5155),o=r(2115),a=r(8122);let i=(0,o.createContext)(void 0);function l(e){let{children:t}=e,[r,l]=(0,o.useState)(!0),[s,d]=(0,o.useState)(!0);return(0,o.useEffect)(()=>{let e=!1;return(0,a.Xf)().then(t=>{e||l(t.starfieldEnabled)}).catch(()=>{}).finally(()=>{e||d(!1)}),()=>{e=!0}},[]),(0,n.jsx)(i.Provider,{value:{starfieldOn:r,setStarfieldOn:e=>{l(e),(0,a.Wz)({starfieldEnabled:e}).catch(()=>{})},toggleStarfield:()=>{l(e=>{let t=!e;return(0,a.Wz)({starfieldEnabled:t}).catch(()=>{}),t})},loading:s},children:t})}function s(){let e=(0,o.useContext)(i);if(void 0===e)throw Error("useStarfield must be used within StarfieldProvider");return e}},4234:(e,t,r)=>{Promise.resolve().then(r.bind(r,5351))},5351:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>h});var n=r(5155),o=r(2115),a=r(8999),i=r(6203),l=r(8915),s=r(5317),d=r(2966),c=r(8743);function u(){let[e,t]=(0,o.useState)({}),{starfieldOn:r,toggleStarfield:a}=(0,d.w)(),{heroImageMode:i,setHeroImageMode:u}=(0,c.F)();(0,o.useEffect)(()=>{let e=["hero","about","skills","experience","projects","education","footer"];!async function(){let r={};for(let t of e){let e=(0,s.rJ)(l.db,t),n=await (0,s.GG)(e);r[t]=n.docs.map(e=>({id:e.id,raw:JSON.stringify(e.data(),null,2)}))}t(r)}()},[]);let f=async(e,t)=>{try{let r=JSON.parse(t.raw),n=(0,s.H9)(l.db,e,t.id);await (0,s.BN)(n,r),alert("✓ Saved ".concat(e,"/").concat(t.id))}catch(t){let e="Unknown error";t instanceof Error&&(e=t.message),alert("✗ JSON parse error: "+e)}},h=async(e,r)=>{if(!confirm("Delete ".concat(e,"/").concat(r,"?")))return;let n=(0,s.H9)(l.db,e,r);try{await (0,s.kd)(n),t(t=>({...t,[e]:t[e].filter(e=>e.id!==r)}))}catch(t){let e="Unknown error";t instanceof Error&&(e=t.message),alert("✗ Delete failed: "+e)}},p=e=>{let r=(0,s.H9)((0,s.rJ)(l.db,e)).id;t(t=>{var n;return{...t,[e]:[...null!=(n=t[e])?n:[],{id:r,raw:"{}"}]}})};return(0,n.jsxs)("div",{style:{padding:24,fontFamily:"sans-serif"},children:[(0,n.jsx)("h1",{style:{fontSize:24,marginBottom:16},children:"Firestore Admin Console"}),(0,n.jsxs)("div",{style:{marginBottom:24,padding:12,backgroundColor:"#f3f4f6",borderRadius:8},children:[(0,n.jsx)("span",{style:{marginRight:8,fontWeight:500},children:"Gold mode starfield:"}),(0,n.jsx)("button",{type:"button",onClick:a,style:{padding:"6px 14px",backgroundColor:r?"#b45309":"#6b7280",color:"white",border:"none",borderRadius:4,cursor:"pointer",fontWeight:500},children:r?"On":"Off"}),(0,n.jsx)("span",{style:{marginLeft:8,color:"#6b7280",fontSize:14},children:"(takes effect when gold theme is active on the site)"})]}),(0,n.jsxs)("div",{style:{marginBottom:24,padding:12,backgroundColor:"#f3f4f6",borderRadius:8},children:[(0,n.jsx)("span",{style:{marginRight:8,fontWeight:500},children:"Hero image:"}),(0,n.jsx)("button",{type:"button",onClick:()=>u("current"),style:{padding:"6px 14px",marginRight:8,backgroundColor:"current"===i?"#1f2937":"#e5e7eb",color:"current"===i?"white":"#374151",border:"none",borderRadius:4,cursor:"pointer",fontWeight:500},children:"Current style"}),(0,n.jsx)("button",{type:"button",onClick:()=>u("full"),style:{padding:"6px 14px",backgroundColor:"full"===i?"#1f2937":"#e5e7eb",color:"full"===i?"white":"#374151",border:"none",borderRadius:4,cursor:"pointer",fontWeight:500},children:"Full image"}),(0,n.jsx)("span",{style:{marginLeft:8,color:"#6b7280",fontSize:14},children:"(current = masked/zoomed, full = whole image visible)"})]}),Object.entries(e).map(e=>{let[r,o]=e;return(0,n.jsxs)("section",{style:{marginBottom:32},children:[(0,n.jsx)("h2",{style:{textTransform:"capitalize",fontSize:20,marginBottom:8},children:r}),(0,n.jsx)("button",{onClick:()=>p(r),style:{padding:"6px 12px",backgroundColor:"#4b5563",color:"white",border:"none",borderRadius:4,cursor:"pointer"},children:"+ New"}),0===o.length&&(0,n.jsx)("p",{style:{fontStyle:"italic",color:"#666",marginTop:8},children:"(no documents yet)"}),o.map(e=>(0,n.jsxs)("div",{style:{border:"1px solid #ddd",borderRadius:4,padding:12,marginTop:12,backgroundColor:"#f9fafb"},children:[(0,n.jsxs)("header",{children:[(0,n.jsx)("strong",{children:"ID:"})," ",e.id]}),(0,n.jsx)("textarea",{value:e.raw,onChange:n=>{let o=n.target.value;t(t=>({...t,[r]:t[r].map(t=>t.id===e.id?{...t,raw:o}:t)}))},rows:6,style:{width:"100%",fontFamily:"monospace",margin:"8px 0",padding:8,borderRadius:4,border:"1px solid #ccc",resize:"vertical"}}),(0,n.jsxs)("div",{children:[(0,n.jsx)("button",{onClick:()=>f(r,e),style:{padding:"6px 12px",backgroundColor:"#1f2937",color:"white",border:"none",borderRadius:4,cursor:"pointer",marginRight:8},children:"Save"}),(0,n.jsx)("button",{onClick:()=>h(r,e.id),style:{padding:"6px 12px",backgroundColor:"#b91c1c",color:"white",border:"none",borderRadius:4,cursor:"pointer"},children:"Delete"})]})]},e.id))]},r)})]})}var f=r(9509);function h(){let e=(0,a.useRouter)(),[t,r]=(0,o.useState)(null),[s,d]=(0,o.useState)(!0),[c,h]=(0,o.useState)(""),[p,b]=(0,o.useState)(""),[g,m]=(0,o.useState)(null);if((0,o.useEffect)(()=>(0,i.hg)(l.j,e=>{r(e),d(!1)}),[]),s)return(0,n.jsx)("p",{className:"p-8 text-center",children:"Loading…"});let x=f.env.NEXT_PUBLIC_ADMIN_UID;if(t&&t.uid!==x)return e.replace("/"),null;if(!t){async function y(e){e.preventDefault(),m(null);try{await (0,i.x9)(l.j,c,p)}catch(e){m(e.message)}}return(0,n.jsxs)("div",{className:"max-w-md mx-auto mt-20 p-8 bg-white rounded-lg shadow",children:[(0,n.jsx)("h1",{className:"text-2xl mb-4",children:"Admin Sign-In"}),(0,n.jsxs)("form",{onSubmit:y,className:"space-y-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm",children:"Email"}),(0,n.jsx)("input",{type:"email",value:c,onChange:e=>h(e.target.value),className:"w-full px-3 py-2 border rounded",required:!0})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm",children:"Password"}),(0,n.jsx)("input",{type:"password",value:p,onChange:e=>b(e.target.value),className:"w-full px-3 py-2 border rounded",required:!0})]}),g&&(0,n.jsx)("p",{className:"text-red-600 text-sm",children:g}),(0,n.jsx)("button",{type:"submit",className:"w-full bg-blue-600 text-white py-2 rounded hover:bg-blue-700",children:"Sign In"})]})]})}return(0,n.jsx)(u,{})}},8122:(e,t,r)=>{"use strict";r.d(t,{Wz:()=>s,Xf:()=>l});var n=r(8915),o=r(5317);function a(e){return"string"==typeof e?e:""}let i={starfieldEnabled:!0,heroImageMode:"current"};async function l(){let e=await (0,o.x7)((0,o.H9)(n.db,"settings","site"));if(!e.exists())return i;let t=e.data();return{starfieldEnabled:!1!==t.starfieldEnabled,heroImageMode:"full"===t.heroImageMode||"current"===t.heroImageMode?t.heroImageMode:"current"}}async function s(e){await (0,o.BN)((0,o.H9)(n.db,"settings","site"),e,{merge:!0})}},8743:(e,t,r)=>{"use strict";r.d(t,{F:()=>s,HeroImageProvider:()=>l});var n=r(5155),o=r(2115),a=r(8122);let i=(0,o.createContext)(void 0);function l(e){let{children:t}=e,[r,l]=(0,o.useState)("current"),[s,d]=(0,o.useState)(!0);return(0,o.useEffect)(()=>{let e=!1;return(0,a.Xf)().then(t=>{e||l(t.heroImageMode)}).catch(()=>{}).finally(()=>{e||d(!1)}),()=>{e=!0}},[]),(0,n.jsx)(i.Provider,{value:{heroImageMode:r,setHeroImageMode:e=>{l(e),(0,a.Wz)({heroImageMode:e}).catch(()=>{})},isFullImage:"full"===r,loading:s},children:t})}function s(){let e=(0,o.useContext)(i);if(void 0===e)throw Error("useHeroImage must be used within HeroImageProvider");return e}},8915:(e,t,r)=>{"use strict";r.d(t,{db:()=>l,j:()=>s});var n=r(3915),o=r(5317),a=r(6203);let i=(0,n.Dk)().length?(0,n.Sx)():(0,n.Wp)({apiKey:"AIzaSyB3TpjND15IXtY4oV4-7FQTJRfOpjsLrpc",authDomain:"portfolio-4ad8b.firebaseapp.com",databaseURL:"https://portfolio-4ad8b.firebaseio.com",projectId:"portfolio-4ad8b",storageBucket:"portfolio-4ad8b.appspot.com",messagingSenderId:"601043154557",appId:"1:601043154557:web:ecbf44661588f267202314"}),l=(0,o.aU)(i),s=(0,a.xI)(i)}},e=>{var t=t=>e(e.s=t);e.O(0,[992,811,645,441,684,358],()=>t(4234)),_N_E=e.O()}]);