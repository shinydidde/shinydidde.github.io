(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[698],{4234:(e,r,t)=>{Promise.resolve().then(t.bind(t,6888))},6888:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>x});var a=t(5155),n=t(2115),s=t(5695),o=t(6203),i=t(3915),l=t(5317);let d=(0,i.Dk)().length?(0,i.Sx)():(0,i.Wp)({apiKey:"AIzaSyB3TpjND15IXtY4oV4-7FQTJRfOpjsLrpc",authDomain:"portfolio-4ad8b.firebaseapp.com",databaseURL:"https://portfolio-4ad8b.firebaseio.com",projectId:"portfolio-4ad8b",storageBucket:"portfolio-4ad8b.appspot.com",messagingSenderId:"601043154557",appId:"1:601043154557:web:ecbf44661588f267202314"}),c=(0,l.aU)(d),u=(0,o.xI)(d);function p(){let[e,r]=(0,n.useState)({});(0,n.useEffect)(()=>{let e=["hero","about","skills","experience","projects","education","footer"];!async function(){let t={};for(let r of e){let e=(0,l.rJ)(c,r),a=await (0,l.GG)(e);t[r]=a.docs.map(e=>({id:e.id,raw:JSON.stringify(e.data(),null,2)}))}r(t)}()},[]);let t=async(e,r)=>{try{let t=JSON.parse(r.raw),a=(0,l.H9)(c,e,r.id);await (0,l.BN)(a,t),alert("✓ Saved ".concat(e,"/").concat(r.id))}catch(r){let e="Unknown error";r instanceof Error&&(e=r.message),alert("✗ JSON parse error: "+e)}},s=async(e,t)=>{if(!confirm("Delete ".concat(e,"/").concat(t,"?")))return;let a=(0,l.H9)(c,e,t);try{await (0,l.kd)(a),r(r=>({...r,[e]:r[e].filter(e=>e.id!==t)}))}catch(r){let e="Unknown error";r instanceof Error&&(e=r.message),alert("✗ Delete failed: "+e)}},o=e=>{let t=(0,l.H9)((0,l.rJ)(c,e)).id;r(r=>{var a;return{...r,[e]:[...null!=(a=r[e])?a:[],{id:t,raw:"{}"}]}})};return(0,a.jsxs)("div",{style:{padding:24,fontFamily:"sans-serif"},children:[(0,a.jsx)("h1",{style:{fontSize:24,marginBottom:16},children:"Firestore Admin Console"}),Object.entries(e).map(e=>{let[n,i]=e;return(0,a.jsxs)("section",{style:{marginBottom:32},children:[(0,a.jsx)("h2",{style:{textTransform:"capitalize",fontSize:20,marginBottom:8},children:n}),(0,a.jsx)("button",{onClick:()=>o(n),style:{padding:"6px 12px",backgroundColor:"#4b5563",color:"white",border:"none",borderRadius:4,cursor:"pointer"},children:"+ New"}),0===i.length&&(0,a.jsx)("p",{style:{fontStyle:"italic",color:"#666",marginTop:8},children:"(no documents yet)"}),i.map(e=>(0,a.jsxs)("div",{style:{border:"1px solid #ddd",borderRadius:4,padding:12,marginTop:12,backgroundColor:"#f9fafb"},children:[(0,a.jsxs)("header",{children:[(0,a.jsx)("strong",{children:"ID:"})," ",e.id]}),(0,a.jsx)("textarea",{value:e.raw,onChange:t=>{let a=t.target.value;r(r=>({...r,[n]:r[n].map(r=>r.id===e.id?{...r,raw:a}:r)}))},rows:6,style:{width:"100%",fontFamily:"monospace",margin:"8px 0",padding:8,borderRadius:4,border:"1px solid #ccc",resize:"vertical"}}),(0,a.jsxs)("div",{children:[(0,a.jsx)("button",{onClick:()=>t(n,e),style:{padding:"6px 12px",backgroundColor:"#1f2937",color:"white",border:"none",borderRadius:4,cursor:"pointer",marginRight:8},children:"Save"}),(0,a.jsx)("button",{onClick:()=>s(n,e.id),style:{padding:"6px 12px",backgroundColor:"#b91c1c",color:"white",border:"none",borderRadius:4,cursor:"pointer"},children:"Delete"})]})]},e.id))]},n)})]})}var m=t(9509);function x(){let e=(0,s.useRouter)(),[r,t]=(0,n.useState)(null),[i,l]=(0,n.useState)(!0),[d,c]=(0,n.useState)(""),[x,h]=(0,n.useState)(""),[b,f]=(0,n.useState)(null);if((0,n.useEffect)(()=>(0,o.hg)(u,e=>{t(e),l(!1)}),[]),i)return(0,a.jsx)("p",{className:"p-8 text-center",children:"Loading…"});let g=m.env.NEXT_PUBLIC_ADMIN_UID;if(r&&r.uid!==g)return e.replace("/"),null;if(!r){async function j(e){e.preventDefault(),f(null);try{await (0,o.x9)(u,d,x)}catch(e){f(e.message)}}return(0,a.jsxs)("div",{className:"max-w-md mx-auto mt-20 p-8 bg-white rounded-lg shadow",children:[(0,a.jsx)("h1",{className:"text-2xl mb-4",children:"Admin Sign-In"}),(0,a.jsxs)("form",{onSubmit:j,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm",children:"Email"}),(0,a.jsx)("input",{type:"email",value:d,onChange:e=>c(e.target.value),className:"w-full px-3 py-2 border rounded",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm",children:"Password"}),(0,a.jsx)("input",{type:"password",value:x,onChange:e=>h(e.target.value),className:"w-full px-3 py-2 border rounded",required:!0})]}),b&&(0,a.jsx)("p",{className:"text-red-600 text-sm",children:b}),(0,a.jsx)("button",{type:"submit",className:"w-full bg-blue-600 text-white py-2 rounded hover:bg-blue-700",children:"Sign In"})]})]})}return(0,a.jsx)(p,{})}}},e=>{var r=r=>e(e.s=r);e.O(0,[992,811,75,441,684,358],()=>r(4234)),_N_E=e.O()}]);